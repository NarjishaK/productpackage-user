(()=>{var e={};e.id=598,e.ids=[598],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},15278:(e,r,t)=>{"use strict";t.d(r,{default:()=>c});var s=t(60687),a=t(43210);let i=({selectedPayment:e,onPaymentChange:r})=>(0,s.jsxs)("div",{className:"bg-white shadow-1 rounded-[10px] mt-7.5",children:[(0,s.jsx)("div",{className:"border-b border-gray-3 py-5 px-4 sm:px-8.5",children:(0,s.jsx)("h3",{className:"font-medium text-xl text-dark",children:"Payment Method"})}),(0,s.jsx)("div",{className:"p-4 sm:p-8.5",children:(0,s.jsx)("div",{className:"flex flex-col gap-3",children:(0,s.jsxs)("label",{htmlFor:"COD",className:"flex cursor-pointer select-none items-center gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"radio",name:"paymentMethod",id:"COD",value:"COD",checked:"COD"===e,onChange:e=>r(e.target.value),className:"sr-only"}),(0,s.jsx)("div",{className:`flex h-4 w-4 items-center justify-center rounded-full ${"COD"===e?"border-4 border-blue":"border border-gray-4"}`})]}),(0,s.jsx)("div",{className:`rounded-md border-[0.5px] py-3.5 px-5 ease-out duration-200 hover:bg-gray-2 hover:border-transparent hover:shadow-none min-w-[240px] ${"COD"===e?"border-transparent bg-gray-2":" border-gray-4 shadow-1"}`,children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"pr-2.5",children:(0,s.jsxs)("svg",{width:"21",height:"21",viewBox:"0 0 21 21",fill:"none",children:[(0,s.jsx)("circle",{cx:"10.5",cy:"10.5",r:"10.5",fill:"#10B981"}),(0,s.jsx)("path",{d:"M6 10.5L9 13.5L15 7.5",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,s.jsx)("div",{className:"border-l border-gray-4 pl-2.5",children:(0,s.jsx)("p",{children:"Cash on delivery"})})]})})]})})})]}),n=({onBillingChange:e,billingData:r})=>{let t=t=>{let{name:s,value:a}=t.target;e({...r,[s]:a})};return(0,s.jsxs)("div",{className:"mt-9",children:[(0,s.jsx)("h2",{className:"font-medium text-dark text-xl sm:text-2xl mb-5.5",children:"Billing details"}),(0,s.jsxs)("div",{className:"bg-white shadow-1 rounded-[10px] p-4 sm:p-8.5",children:[(0,s.jsx)("div",{className:"flex flex-col lg:flex-row gap-5 sm:gap-8 mb-5",children:(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("label",{htmlFor:"firstName",className:"block mb-2.5",children:["First Name ",(0,s.jsx)("span",{className:"text-red",children:"*"})]}),(0,s.jsx)("input",{type:"text",name:"firstName",id:"firstName",value:r.firstName||"",onChange:t,placeholder:"John",required:!0,className:"rounded-md border border-gray-3 bg-gray-1 placeholder:text-dark-5 w-full py-2.5 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20"})]})}),(0,s.jsxs)("div",{className:"mb-5",children:[(0,s.jsxs)("label",{htmlFor:"country",className:"block mb-2.5",children:["Country/ Region ",(0,s.jsx)("span",{className:"text-red",children:"*"})]}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("select",{name:"country",value:r.country||"",onChange:t,required:!0,className:"w-full bg-gray-1 rounded-md border border-gray-3 text-dark-4 py-3 pl-5 pr-9 duration-200 appearance-none outline-none focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20",children:[(0,s.jsx)("option",{value:"",children:"Select Country"}),(0,s.jsx)("option",{value:"India",children:"India"})]})})]}),(0,s.jsxs)("div",{className:"mb-5",children:[(0,s.jsxs)("label",{htmlFor:"address",className:"block mb-2.5",children:["Street Address ",(0,s.jsx)("span",{className:"text-red",children:"*"})]}),(0,s.jsx)("input",{type:"text",name:"address",id:"address",value:r.address||"",onChange:t,placeholder:"House number and street name",required:!0,className:"rounded-md border border-gray-3 bg-gray-1 placeholder:text-dark-5 w-full py-2.5 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20"}),(0,s.jsx)("div",{className:"mt-5",children:(0,s.jsx)("input",{type:"text",name:"address1",id:"address1",value:r.address1||"",onChange:t,placeholder:"Apartment, suite, unit, etc. (optional)",className:"rounded-md border border-gray-3 bg-gray-1 placeholder:text-dark-5 w-full py-2.5 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20"})})]}),(0,s.jsxs)("div",{className:"mb-5",children:[(0,s.jsxs)("label",{htmlFor:"city",className:"block mb-2.5",children:["Town/ City ",(0,s.jsx)("span",{className:"text-red",children:"*"})]}),(0,s.jsx)("input",{type:"text",name:"city",id:"city",value:r.city||"",onChange:t,required:!0,className:"rounded-md border border-gray-3 bg-gray-1 placeholder:text-dark-5 w-full py-2.5 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20"})]}),(0,s.jsxs)("div",{className:"flex gap-5 mb-5",children:[(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("label",{htmlFor:"state",className:"block mb-2.5",children:"State"}),(0,s.jsx)("input",{type:"text",name:"state",id:"state",value:r.state||"",onChange:t,className:"rounded-md border border-gray-3 bg-gray-1 placeholder:text-dark-5 w-full py-2.5 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20"})]}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("label",{htmlFor:"pincode",className:"block mb-2.5",children:"Pincode"}),(0,s.jsx)("input",{type:"text",name:"pincode",id:"pincode",value:r.pincode||"",onChange:t,className:"rounded-md border border-gray-3 bg-gray-1 placeholder:text-dark-5 w-full py-2.5 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20"})]})]}),(0,s.jsxs)("div",{className:"mb-5",children:[(0,s.jsxs)("label",{htmlFor:"phone",className:"block mb-2.5",children:["Phone ",(0,s.jsx)("span",{className:"text-red",children:"*"})]}),(0,s.jsx)("input",{type:"tel",name:"phone",id:"phone",value:r.phone||"",onChange:t,required:!0,className:"rounded-md border border-gray-3 bg-gray-1 placeholder:text-dark-5 w-full py-2.5 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20"})]}),(0,s.jsxs)("div",{className:"mb-5.5",children:[(0,s.jsxs)("label",{htmlFor:"email",className:"block mb-2.5",children:["Email Address ",(0,s.jsx)("span",{className:"text-red",children:"*"})]}),(0,s.jsx)("input",{type:"email",name:"email",id:"email",value:r.email||"",onChange:t,required:!0,className:"rounded-md border border-gray-3 bg-gray-1 placeholder:text-dark-5 w-full py-2.5 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20"})]})]})]})};var o=t(77618),l=t(77567),d=t(51060);let c=()=>{let[e,r]=(0,a.useState)([]),[t,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!0),[p,x]=(0,a.useState)(0),h=()=>{try{let e=localStorage.getItem("customerDetails");if(!e)return console.log("No customer details in localStorage"),null;return JSON.parse(e)}catch(e){return console.error("Error parsing customer details:",e),null}};(0,a.useEffect)(()=>{let e=h(),t=e?._id||e?.id;t?(c(!0),(0,o.L8)(t).then(e=>{r(e),x(e.reduce((e,r)=>e+r?.packageId?.price*r.quantity,0))}).catch(e=>{console.error("Failed to fetch customer cart",e)}).finally(()=>{m(!1)})):(c(!1),m(!1))},[]);let[g,b]=(0,a.useState)(!1),[f,y]=(0,a.useState)({firstName:"",country:"",address:"",address1:"",city:"",state:"",pincode:"",phone:"",email:""}),[j,v]=(0,a.useState)("COD"),[N,k]=(0,a.useState)(""),[w,C]=(0,a.useState)(""),P=t?p:0,q=P+0,D=async e=>{try{console.log("Sending order data:",e);let r=await fetch(`${o.C1}/customerorder/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await r.json();if(!r.ok)throw Error(t.message||`HTTP error! status: ${r.status}`);return t}catch(e){throw console.error("API call error:",e),e}},S=()=>{let r=["firstName","country","address","city","phone","email"].filter(e=>!f[e]?.trim());return r.length>0?(l.A.fire({icon:"error",title:"Oops...",text:`Please fill in required fields: ${r.join(", ")}`}),!1):0!==e.length||(l.A.fire({icon:"error",title:"Oops...",text:"Your cart is empty"}),!1)},O=async r=>{if(r.preventDefault(),S()){b(!0);try{let r=h(),s=r?._id||r?.id;if(!s){l.A.fire({icon:"error",title:"Oops...",text:"Customer not found. Please log in again."}),b(!1);return}console.log("Using customer ID for order:",s);let a=e.map(e=>t?{packageId:e.packageId?._id||e.packageId,quantity:e.quantity}:{_id:e.id,packagename:e.packagename,price:e.price,image:e.image,mainCategory:e.mainCategory,quantity:e.quantity}),i={customerId:s,billingDetails:{firstName:f.firstName.trim(),country:f.country.trim(),address:f.address.trim(),address1:f.address1?.trim()||"",city:f.city.trim(),state:f.state?.trim()||"",pincode:f.pincode?.trim()||"",phone:f.phone.trim(),email:f.email.trim()},paymentMethod:j,cartItems:a,totalAmount:q,note:N.trim(),deliveryDate:w||null};console.log("Creating order with data:",i),await d.A.post(`${o.C1}/notification/create`,{message1:`Creating new order by customer : ${i.billingDetails.firstName}`});let n=await D(i);console.log("Order created successfully:",n),l.A.fire({icon:"success",title:"Success!",text:"Order created successfully!"}),setTimeout(()=>{window.location.href="/"},3e3)}catch(e){console.error("Error creating order:",e),l.A.fire({icon:"error",title:"Oops...",text:`Failed to create order: ${e.message}`})}finally{b(!1)}}};return(0,s.jsx)("div",{className:"bg-gray-50 min-h-screen py-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Checkout"}),(0,s.jsx)("form",{onSubmit:O,children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,s.jsxs)("div",{className:"lg:w-2/3",children:[(0,s.jsx)(n,{onBillingChange:y,billingData:f}),(0,s.jsx)("div",{className:"bg-white shadow-1 rounded-[10px] p-4 sm:p-8.5 mt-7.5",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"deliveryDate",className:"block mb-2.5",children:"Preferred Delivery Date (optional)"}),(0,s.jsx)("input",{type:"date",name:"deliveryDate",id:"deliveryDate",value:w,onChange:e=>C(e.target.value),min:new Date().toISOString().split("T")[0],className:"rounded-md border border-gray-3 bg-gray-1 w-full py-2.5 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20"})]})}),(0,s.jsx)("div",{className:"bg-white shadow-1 rounded-[10px] p-4 sm:p-8.5 mt-7.5",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"notes",className:"block mb-2.5",children:"Other Notes (optional)"}),(0,s.jsx)("textarea",{name:"notes",id:"notes",rows:5,value:N,onChange:e=>k(e.target.value),placeholder:"Notes about your order, e.g. special notes for delivery.",className:"rounded-md border border-gray-3 bg-gray-1 placeholder:text-dark-5 w-full p-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20"})]})})]}),(0,s.jsxs)("div",{className:"max-w-[455px] w-full",children:[(0,s.jsxs)("div",{className:"bg-white shadow-1 rounded-[10px]",children:[(0,s.jsx)("div",{className:"border-b border-gray-3 py-5 px-4 sm:px-8.5",children:(0,s.jsx)("h3",{className:"font-medium text-xl text-dark",children:"Your Order"})}),(0,s.jsxs)("div",{className:"pt-2.5 pb-8.5 px-4 sm:px-8.5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between py-5 border-b border-gray-3",children:[(0,s.jsx)("div",{children:(0,s.jsx)("h4",{className:"font-medium text-dark",children:"Product"})}),(0,s.jsx)("div",{children:(0,s.jsx)("h4",{className:"font-medium text-dark text-right",children:"Subtotal"})})]}),u?(0,s.jsx)("div",{className:"flex items-center justify-center py-5",children:(0,s.jsx)("p",{className:"text-dark",children:"Loading order details..."})}):e.length>0?e.map((e,r)=>(0,s.jsxs)("div",{className:"flex items-center justify-between py-5 border-b border-gray-3",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-dark",children:[t?e?.packageId?.packagename:e.packagename,` x ${e.quantity}`]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-dark text-right",children:["₹",t?(e.packageId?.price*e.quantity).toFixed(2):(e.price*e.quantity).toFixed(2)]})})]},r)):(0,s.jsx)("div",{className:"flex items-center justify-center py-5",children:(0,s.jsx)("p",{className:"text-dark",children:"No items in cart"})}),e.length>0&&(0,s.jsxs)("div",{className:"flex items-center justify-between py-5 border-b border-gray-3",children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"text-dark",children:"Subtotal"})}),(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-dark text-right",children:["₹",P.toFixed(2)]})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between py-5 border-b border-gray-3",children:[(0,s.jsx)("p",{className:"text-dark",children:"Shipping Fee"}),(0,s.jsxs)("p",{className:"text-dark",children:["₹","0.00"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-5",children:[(0,s.jsx)("p",{className:"font-medium text-lg text-dark",children:"Total"}),(0,s.jsxs)("p",{className:"font-medium text-lg text-dark",children:["₹",q.toFixed(2)]})]})]})]}),(0,s.jsx)(i,{selectedPayment:j,onPaymentChange:v}),(0,s.jsx)("button",{type:"submit",disabled:g||0===e.length,className:"w-full flex justify-center font-medium text-white bg-blue py-3 px-6 rounded-md ease-out duration-200 hover:bg-blue-dark mt-7.5 disabled:opacity-50 disabled:cursor-not-allowed",children:g?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing Order..."]}):0===e.length?"Cart is Empty":"Place Order"})]})]})})]})})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},48716:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n,metadata:()=>i});var s=t(37413);t(61120);var a=t(91423);let i={title:"Deelzon Checkout Page | Deelzon Package Booking ",description:" This is Deelzon Checkout Page for – Seamless E-commerce Package Booking & Easy Claim Process"},n=()=>(0,s.jsx)("main",{children:(0,s.jsx)(a.default,{})})},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78340:(e,r,t)=>{Promise.resolve().then(t.bind(t,15278))},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83807:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=t(65239),a=t(48088),i=t(88170),n=t.n(i),o=t(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d={children:["",{children:["(site)",{children:["(pages)",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,48716)),"/Users/narjisha/Desktop/package-user/src/app/(site)/(pages)/checkout/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,57374)),"/Users/narjisha/Desktop/package-user/src/app/(site)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/narjisha/Desktop/package-user/src/app/(site)/(pages)/checkout/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(site)/(pages)/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},83997:e=>{"use strict";e.exports=require("tty")},91423:(e,r,t)=>{"use strict";t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/narjisha/Desktop/package-user/src/components/Checkout/index.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/narjisha/Desktop/package-user/src/components/Checkout/index.tsx","default")},94735:e=>{"use strict";e.exports=require("events")},96900:(e,r,t)=>{Promise.resolve().then(t.bind(t,91423))}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,825,87,748],()=>t(83807));module.exports=s})();